<%- include header %>

<%- include nav %>

<div class="container" ng-controller="mydetail">
	<div class="describe" style="width:200px;margin:0 auto;">
		<img src="../image/pic.jpg" width="50" height="30"/><span>个人中心</span>
	</div>
	<!-- 头像 -->
	<!-- 选项列表 -->
	<div class="tabbable container" id="tabs">
	  <ul class="nav nav-tabs">
	    <li class="active"> <a href="#update-personinfo" data-toggle="tab">修改个人信息</a> </li>
	    <li> <a href="#at-association" data-toggle="tab">所在社团</a> </li>
	    <li> <a href="#join-activity" data-toggle="tab">参与活动</a> </li>
	    <li> <a href="#mydiary" data-toggle="tab">我的日记</a> </li>
	    <li> <a href="#inform" data-toggle="tab">通知</a> </li>
	    <li> <a href="#update-password" data-toggle="tab">修改密码</a> </li>
	  </ul>
	  <div class="tab-content"  style="margin-top:30px;"> 
	    <!-- ==================修改个人信息==================-->
	    <div class="tab-pane active" id="update-personinfo">
	      <form class="form-horizontal" method="post" role="form">
	        <div class="form-group">
	          <label for="username" class="col-sm-4 control-label" >用户名</label>
	          <div class="col-sm-6">
	            <input type="text" class="form-control" id="username" ng-model="userinfo.inform[0].user_name" readonly>
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="snum" class="col-sm-4 control-label">学号</label>
	          <div class="col-sm-6">
	            <input type="text" class="form-control" id="snum"  ng-model="userinfo.inform[0].user_number" placeholder="请输入个人学号">
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="name" class="col-sm-4 control-label ">姓名</label>
	          <div class="col-sm-6">
	            <input type="text" class="form-control" id="name" ng-model="userinfo.inform[0].user_truename"  placeholder="请输入真实姓名">
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="gender" class="col-sm-4 control-label ">性别</label>
	          <div class="col-sm-6">
	            <select name="gender" id="gender" class="form-control"  ng-model="userinfo.inform[0].user_sex">
	              <option value="男">男</option>
	              <option value="女">女</option>
	            </select>
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="department" class="col-sm-4 control-label ">系别</label>
	          <div class="col-sm-6">
	            <input type="text" class="form-control" id="department" ng-model="userinfo.inform[0].user_major"  placeholder="请输入系别">
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="grade" class="col-sm-4 control-label ">年级</label>
	          <div class="col-sm-6">
	            <select name="grade" id="grade" class="form-control" ng-model="userinfo.inform[0].user_grade">
	              <option value="13级">13级</option>
	              <option value="14级">14级</option>
	              <option value="15级">15级</option>
	              <option value="16级">16级</option>
	            </select>
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="phone" class="col-sm-4 control-label ">手机号码</label>
	          <div class="col-sm-6">
	            <input type="text" class="form-control" id="phone"  ng-model="userinfo.inform[0].user_phone" placeholder="请输入手机号码">
	          </div>
	        </div>
	        <button class="btn btn-primary mybtn" ng-click="alterdata()">保存</button>
	      </form>
	    </div>
	    <!-- ==================所在社团==================-->
	    <div class="tab-pane" id="at-association">
	      <div class="col-sm-3 column well" ng-repeat = "organization in userinfo.org">
	        <div><img ng-src="{{organization.org_icon}}" width="200px" class="img-thumbnail" style="display:block;margin:10px auto;"></div>
	        <div>
	          <h4 style="text-align:center;"><a ng-href="/organization/{{organization.org_id}}" class="redlink"><span id="association">{{organization.org_name}}</span></a></h4>
<!-- 	          <p><strong>入会时间：</strong><span id="jointime">{{organization.org_jointime}}</span></p>
	          <p><strong>职务：</strong><span id="job">{{organization.org_duty}}</span></p>
	          <p><strong>部门：</strong><span id="partment">{{organization.org_duty}}</span></p> -->
	        </div>
	      </div>
	    </div>
	    
	    <!-- ==================参与活动==================-->
	    <div class="tab-pane panel-group" id="join-activity">
	      <div class="col-sm-4 column well" ng-repeat = "activity in userinfo.act">
	        <div><img ng-src="{{activity.act_poster}}" width="200px" class="img-thumbnail" style="display:block;margin:10px auto;"></div>
	        <div>
	          <h4 style="text-align:center;"><a href="/activity/{{activity.act_id}}" class="redlink"><span id="association">{{activity.act_name}}</a></small></h4>
	        </div>
	      </div>
	    </div>
	    <!-- ==================我的日记==================-->
	    <div class="tab-pane panel-group" id="mydiary">
	      <div id="diarytitles">
	        <table class="table table-bordered table-hover">
	          <thead>
	            <tr>
	              <th class="col-md-8 column"> 标题 </th>
	              <th class="col-md-4 column"> 发表时间 </th>
	            </tr>
	          </thead>
	          <tbody>
	            <tr ng-repeat = "dirayinfo in userinfo.diary">
	              <td><a ng-href="/diary/{{dirayinfo.dia_id}}">{{dirayinfo.dia_title}}</a></td>
	              <td>{{dirayinfo.dia_time}}</td>
	            </tr>
	          </tbody>
	        </table>
	        <a id="wantin" href="#wantIn" role="button" class="btn btn-success" data-toggle="modal" style="margin-bottom:50px;">发表日记</a>
	        <div class="modal fade" id="wantIn" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-controller="postdetail">
	          <div class="modal-dialog">
	            <div class="modal-content">
	              <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
	                <h4 class="modal-title" id="myModalLabel"> 发表日记</h4>
	              </div>
	              <div class="modal-body">
	                <form class="form-horizontal" method="post" role="form" id="form">
	                  <div class="form-group">
	                    <label for="title" class="col-sm-2 control-label">标题</label>
	                    <div class="col-sm-9">
	                      <input type="text" class="form-control" id="title" placeholder="请输入标题" ng-model="title">
	                    </div>
	                  </div>
	                  <div class="form-group">
	                    <label for="title" class="col-sm-2 control-label">关于</label>
	                    <div class="col-sm-9">
	                      <input type="text" class="form-control" id="title" placeholder="请输入关于" ng-model="about">
	                    </div>
	                  </div>
	                  <div class="form-group">
	                    <label for="content" class="col-sm-2 control-label ">内容</label>
	                    <div class="col-sm-9">
	                      <textarea class="form-control" id="content" placeholder="您今天心情怎么样呢" ng-model="content" style="height:150px;"></textarea>
	                    </div>
	                  </div>
	                  <div class="alert alert-danger" role="alert" ng-show="isShow">{{err}}</div>
	                </form>
	              </div>
	              <div class="modal-footer">
	                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
	                <input class="btn btn-primary" value="发表" ng-click="post()">
	              </div>
	            </div>
	          </div>
	        </div>
	      </div>
	    </div>
	    <!-- ==================通知==================-->
	    <div class="tab-pane panel-group" id="inform">
	      <div class="tabbable" id="tabs" style="margin:40px auto;text-align:center;">
	        <ul class="nav nav-pills">
	          <li class="active"> <a href="#read" data-toggle="tab">已读</a> </li>
	          <li> <a href="#unread" data-toggle="tab">未读</a> </li>
	        </ul>
	        <div class="tab-content"  style="margin-top:30px;">
	          <div class="tab-pane panel-group" id="read">
	            <table class="table table-striped table-hover">
	              <thead>
	                <tr>
	                  <th class="col-md-8 column"> 标题 </th>
	                  <th class="col-md-2 column"> 来源 </th>
	                  <th class="col-md-2 column"> 时间 </th>
	                </tr>
	              </thead>
	              <tbody>
	              	<!-- 循环已读通知 -->
	                <tr ng-repeat = "inform in userinfo.infor | filter:{inf_state:0}">
	                  <td><a href="/inform/{{inform.inf_id}}">{{inform.inf_title}}</a></td>
	                  <td>{{inform.inf_from}}</td>
	                  <td>{{inform.inf_time}}</td>
	                </tr>
	                
	              </tbody>
	            </table>
	          </div>
	          <div class="tab-pane panel-group" id="unread">
	            <table class="table table-striped table-hover">
	              <thead>
	                <tr>
	                  <th class="col-md-8 column"> 标题 </th>
	                  <th class="col-md-2 column"> 来源 </th>
	                  <th class="col-md-2 column"> 时间 </th>
	                </tr>
	              </thead>
	              <tbody>
	                <tr ng-repeat = "inform in userinfo.infor | filter:{inf_state:1}">
	                  <td><a href="/inform/{{inform.inf_id}}">{{inform.inf_title}}</a></td>
	                  <td>{{inform.inf_from}}</td>
	                  <td>{{inform.inf_time}}</td>
	                </tr>
	              </tbody>
	            </table>
	          </div>
	        </div>
	      </div>
	    </div>
	    <!-- ==================修改密码==================-->
	    <div class="tab-pane panel-group" id="update-password">
	      <h1>修改密码</h1>
	      <br>
	      <form class="form-horizontal" method="post" role="form">
	        <div class="form-group">
	          <label for="password" class="col-sm-4 control-label">原密码</label>
	          <div class="col-sm-6">
	            <input type="password" class="form-control" id="password" placeholder="请输入原密码(6-16位)" ng-model="oldpassword">
	          </div>
	        </div>
	        <div class="form-group">
	          <label for="snum" class="col-sm-4 control-label">新密码</label>
	          <div class="col-sm-6">
	            <input type="password" class="form-control" id="newpassword" placeholder="请输入新密码(6-16位)" ng-model="newpassword">
	          </div>
	        </div>
	        <div class="alert alert-danger" role="alert" ng-show="isShow">{{err}}</div>
	        <button class="btn btn-primary mybtn" ng-click="alterpassword()">修改</button>
	      </form>
	    </div>
	  </div>
	</div>
	<!-- <div class="alert alert-danger" role="alert" ng-show="isshow">{{err}}</div> -->
<%- include footer %>

</body>
</html>